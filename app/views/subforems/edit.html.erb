<% title "Edit #{@subforem.domain}" %>

<main id="main-content" class="crayons-layout crayons-layout--limited-m">
  <header class="crayons-card flex items-center justify-between p-3 pr-1 m:pr-5 m:p-6 m:pt-5">
    <h1 class="crayons-title">Edit <%= @subforem.domain %></h1>
    <div class="flex gap-2">
      <%= link_to "Back to Subforems", subforems_path, class: "crayons-btn crayons-btn--ghost" %>
    </div>
  </header>

  <div class="crayons-card p-4 m:p-6">
    <%= form_for @subforem do |form| %>
      <div class="flex flex-col gap-4">
        <% if current_user.any_admin? %>
          <div class="crayons-field">
            <%= form.label :domain, class: "crayons-field__label" %>
            <%= form.text_field :domain, class: "crayons-textfield" %>
          </div>
          
          <div class="crayons-field">
            <%= form.label :name, "Community Name", class: "crayons-field__label" %>
            <%= form.text_field :name, class: "crayons-textfield", placeholder: "Enter the community name" %>
          </div>
          
          <div class="crayons-field">
            <%= form.label :internal_content_description_spec, "Internal Content Description Spec", class: "crayons-field__label" %>
            <%= text_area_tag :internal_content_description_spec, 
                Settings::RateLimit.internal_content_description_spec(subforem_id: @subforem.id), 
                class: "crayons-textfield", 
                rows: 4, 
                placeholder: "Describe the internal content description specification..." %>
          </div>
          
          <div class="crayons-field">
            <%= form.label :logo_url, "Logo URL", class: "crayons-field__label" %>
            <%= form.text_field :logo_url, class: "crayons-textfield", placeholder: "https://example.com/logo.png" %>
          </div>
          
          <div class="crayons-field">
            <%= form.label :bg_image_url, "Background Image URL (Optional)", class: "crayons-field__label" %>
            <%= form.text_field :bg_image_url, class: "crayons-textfield", placeholder: "https://example.com/background.jpg" %>
          </div>
        <% else %>
          <div class="crayons-field">
            <%= form.label :internal_content_description_spec, "Internal Content Description Spec", class: "crayons-field__label" %>
            <%= text_area_tag :internal_content_description_spec, 
                Settings::RateLimit.internal_content_description_spec(subforem_id: @subforem.id), 
                class: "crayons-textfield", 
                rows: 4, 
                placeholder: "Describe the internal content description specification..." %>
          </div>
          
          <div class="crayons-field">
            <%= form.label :logo_url, "Logo URL", class: "crayons-field__label" %>
            <%= form.text_field :logo_url, class: "crayons-textfield", placeholder: "https://example.com/logo.png" %>
          </div>
          
          <div class="crayons-field">
            <%= form.label :bg_image_url, "Background Image URL (Optional)", class: "crayons-field__label" %>
            <%= form.text_field :bg_image_url, class: "crayons-textfield", placeholder: "https://example.com/background.jpg" %>
          </div>
        <% end %>
        
        <% if current_user.any_admin? %>
          <div class="crayons-field">
            <%= form.label :discoverable, class: "crayons-field__label" %>
            <%= form.check_box :discoverable, class: "crayons-checkbox" %>
          </div>
        <% end %>

        <div class="crayons-field">
          <%= form.label :community_description, "Community Description", class: "crayons-field__label" %>
          <%= text_area_tag :community_description, 
              Settings::Community.community_description(subforem_id: @subforem.id), 
              class: "crayons-textfield", 
              rows: 4, 
              placeholder: "Describe your community..." %>
        </div>

        <div class="crayons-field">
          <%= form.label :tagline, "Tagline", class: "crayons-field__label" %>
          <%= text_field_tag :tagline, 
              Settings::Community.tagline(subforem_id: @subforem.id), 
              class: "crayons-textfield", 
              placeholder: "A short tagline for your community..." %>
        </div>
        
        <div class="mt-6">
          <%= form.submit "Update Subforem", class: "crayons-btn crayons-btn--primary" %>
        </div>
      </div>
    <% end %>
  </div>
</main>

